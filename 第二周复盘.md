# 周复盘 — 第 2 周

日期：2025-11-09

一、本周已完成（Summary）

- 将单体项目拆分为两个可独立构建的服务：`user-service` 与 `order-service`（代码位于对应文件夹）。
- 为每个服务准备了 Dockerfile（位于各服务目录）。
- 编写并提交了 `docker-compose.yml`（仓库根），可用于本地一键启动基础依赖与服务（需在本地构建镜像）。
- 在仓库根添加了技术笔记 `tech-note.md`（Docker Compose 本地联调注意点）。

二、未完成 / 有待改进项

- CI（GitHub Actions）基础 workflow 已草拟，但需要在真实仓库上验证并修复构建/测试失败（目前在本地未触发远程 CI）。
- 集成测试与端到端验证（比如：下单流程带用户校验）需在 Compose 环境下完整跑一次并收集日志。部分测试在本地单模块运行时未覆盖所有互相调用场景。
- 对于依赖（MySQL/Redis）使用的持久化卷与初始化脚本尚需完善，以便在本地反复调试时数据状态可控。

三、下周优先级（K8s / Observability）

1. 把当前 Compose 环境迁移到本地 Kubernetes（建议使用 k3d 或 minikube），目标是熟悉 Deployment/Service/Ingress 与 ConfigMap/Secret 的映射。
2. 接入基础可观测性：Prometheus + Grafana 或至少输出 Prometheus 格式的 metrics（Micrometer）。

四、短期 TODO 列表（可直接转为 issue）

- [ ] 在仓库添加 `.github/workflows/ci.yml` 并在 push 后验证（修复构建或测试失败）。
- [ ] 在 `docker-compose.yml` 中为数据库添加初始化 SQL，并配置持久卷（便于本地重复调试）。
- [ ] 使用 `docker-compose up` 在本地跑通一个端到端场景（POST /api/orders -> 调用 user-service），并把请求/响应与关键日志粘贴到 README 或 issues。
- [ ] 在代码中加入重试/断路器或健康检查，使服务在依赖未就绪时有更好的容错体验。

五、验收标准（下一次检查）

- `user-service` 与 `order-service` 能在本地独立启动并返回健康检查 200。
- 使用 `docker-compose up --build` 能在本地启动所有服务并完成一次下单端到端流程。
- GitHub Actions CI 能在 push 后触发，并通过 mvn package + 单元测试。

六、建议的 Git commit messages / PR 描述

- commit: "feat: add tech-note Docker Compose 本地联调注意点"
- commit: "chore: add 周复盘 and TODOs"
- PR 描述建议：简要列出已拆分服务、如何用 docker-compose 启动、需在 CI 上验证的点。
